import _classCallCheck from "@babel/runtime/helpers/classCallCheck";
import _createClass from "@babel/runtime/helpers/createClass";
import { bold } from './bold';
import { code, codeBlock } from './code';
import { italic } from './italic';
import { link } from './link';
import { unorderedListCommand, orderedListCommand, checkedListCommand } from './list';
import { quote } from './quote';
import { hr } from './hr';
import { title } from './title';
import { title1 } from './title1';
import { title2 } from './title2';
import { title3 } from './title3';
import { title4 } from './title4';
import { title5 } from './title5';
import { title6 } from './title6';
import { comment } from './comment';
import { group } from './group';
import { divider } from './divider';
import { codePreview, codeEdit, codeLive } from './preview';
import { fullscreen } from './fullscreen';
import { image } from './image';
import { strikethrough } from './strikeThrough';
import insertText from '../utils/InsertTextAtPosition';

var getCommands = function getCommands() {
  return [comment, bold, italic, strikethrough, hr, title, divider, link, quote, code, codeBlock, image, divider, unorderedListCommand, orderedListCommand, checkedListCommand, divider, codeEdit, codeLive, codePreview, divider, fullscreen];
};

function getStateFromTextArea(textArea) {
  return {
    selection: {
      start: textArea.selectionStart,
      end: textArea.selectionEnd
    },
    text: textArea.value,
    selectedText: textArea.value.slice(textArea.selectionStart, textArea.selectionEnd)
  };
}

var TextAreaTextApi = /*#__PURE__*/function () {
  function TextAreaTextApi(textArea) {
    _classCallCheck(this, TextAreaTextApi);

    this.textArea = void 0;
    this.textArea = textArea;
  }

  _createClass(TextAreaTextApi, [{
    key: "replaceSelection",
    value: function replaceSelection(text) {
      insertText(this.textArea, text);
      return getStateFromTextArea(this.textArea);
    }
  }, {
    key: "setSelectionRange",
    value: function setSelectionRange(selection) {
      this.textArea.focus();
      this.textArea.selectionStart = selection.start;
      this.textArea.selectionEnd = selection.end;
      return getStateFromTextArea(this.textArea);
    }
  }]);

  return TextAreaTextApi;
}();

var TextAreaCommandOrchestrator = /*#__PURE__*/function () {
  function TextAreaCommandOrchestrator(textArea) {
    _classCallCheck(this, TextAreaCommandOrchestrator);

    this.textArea = void 0;
    this.textApi = void 0;
    this.textArea = textArea;
    this.textApi = new TextAreaTextApi(textArea);
  }

  _createClass(TextAreaCommandOrchestrator, [{
    key: "getState",
    value: function getState() {
      if (!this.textArea) return false;
      return getStateFromTextArea(this.textArea);
    }
  }, {
    key: "executeCommand",
    value: function executeCommand(command) {
      command.execute && command.execute(getStateFromTextArea(this.textArea), this.textApi);
    }
  }]);

  return TextAreaCommandOrchestrator;
}();

export { // Toolbars.
title, title1, title2, title3, title4, title5, title6, bold, codeBlock, italic, strikethrough, hr, group, divider, link, quote, code, image, unorderedListCommand, orderedListCommand, checkedListCommand, codeEdit, codeLive, codePreview, fullscreen // Tool method.
, getCommands, getStateFromTextArea, TextAreaCommandOrchestrator, TextAreaTextApi };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tYW5kcy9pbmRleC50cyJdLCJuYW1lcyI6WyJib2xkIiwiY29kZSIsImNvZGVCbG9jayIsIml0YWxpYyIsImxpbmsiLCJ1bm9yZGVyZWRMaXN0Q29tbWFuZCIsIm9yZGVyZWRMaXN0Q29tbWFuZCIsImNoZWNrZWRMaXN0Q29tbWFuZCIsInF1b3RlIiwiaHIiLCJ0aXRsZSIsInRpdGxlMSIsInRpdGxlMiIsInRpdGxlMyIsInRpdGxlNCIsInRpdGxlNSIsInRpdGxlNiIsImNvbW1lbnQiLCJncm91cCIsImRpdmlkZXIiLCJjb2RlUHJldmlldyIsImNvZGVFZGl0IiwiY29kZUxpdmUiLCJmdWxsc2NyZWVuIiwiaW1hZ2UiLCJzdHJpa2V0aHJvdWdoIiwiaW5zZXJ0VGV4dCIsImdldENvbW1hbmRzIiwiZ2V0U3RhdGVGcm9tVGV4dEFyZWEiLCJ0ZXh0QXJlYSIsInNlbGVjdGlvbiIsInN0YXJ0Iiwic2VsZWN0aW9uU3RhcnQiLCJlbmQiLCJzZWxlY3Rpb25FbmQiLCJ0ZXh0IiwidmFsdWUiLCJzZWxlY3RlZFRleHQiLCJzbGljZSIsIlRleHRBcmVhVGV4dEFwaSIsImZvY3VzIiwiVGV4dEFyZWFDb21tYW5kT3JjaGVzdHJhdG9yIiwidGV4dEFwaSIsImNvbW1hbmQiLCJleGVjdXRlIl0sIm1hcHBpbmdzIjoiOztBQUFBLFNBQVNBLElBQVQsUUFBcUIsUUFBckI7QUFDQSxTQUFTQyxJQUFULEVBQWVDLFNBQWYsUUFBZ0MsUUFBaEM7QUFDQSxTQUFTQyxNQUFULFFBQXVCLFVBQXZCO0FBQ0EsU0FBU0MsSUFBVCxRQUFxQixRQUFyQjtBQUNBLFNBQVNDLG9CQUFULEVBQStCQyxrQkFBL0IsRUFBbURDLGtCQUFuRCxRQUE2RSxRQUE3RTtBQUNBLFNBQVNDLEtBQVQsUUFBc0IsU0FBdEI7QUFDQSxTQUFTQyxFQUFULFFBQW1CLE1BQW5CO0FBQ0EsU0FBU0MsS0FBVCxRQUFzQixTQUF0QjtBQUNBLFNBQVNDLE1BQVQsUUFBdUIsVUFBdkI7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LE9BQVIsSUFBbUJELE9BQU8sQ0FBQ0MsT0FBUixDQUFnQmhCLG9CQUFvQixDQUFDLEtBQUtDLFFBQU4sQ0FBcEMsRUFBcUQsS0FBS2EsT0FBMUQsQ0FBbkI7QUFDRDs7Ozs7O0FBR0gsU0FDRTtBQUNBaEMsS0FGRixFQUdFQyxNQUhGLEVBSUVDLE1BSkYsRUFLRUMsTUFMRixFQU1FQyxNQU5GLEVBT0VDLE1BUEYsRUFRRUMsTUFSRixFQVNFaEIsSUFURixFQVVFRSxTQVZGLEVBV0VDLE1BWEYsRUFZRXNCLGFBWkYsRUFhRWhCLEVBYkYsRUFjRVMsS0FkRixFQWVFQyxPQWZGLEVBZ0JFZixJQWhCRixFQWlCRUksS0FqQkYsRUFrQkVQLElBbEJGLEVBbUJFdUIsS0FuQkYsRUFvQkVuQixvQkFwQkYsRUFxQkVDLGtCQXJCRixFQXNCRUMsa0JBdEJGLEVBdUJFYyxRQXZCRixFQXdCRUMsUUF4QkYsRUF5QkVGLFdBekJGLEVBMEJFRyxVQTFCRixDQTJCRTtBQTNCRixFQTRCRUksV0E1QkYsRUE2QkVDLG9CQTdCRixFQThCRWEsMkJBOUJGLEVBK0JFRixlQS9CRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJvbGQgfSBmcm9tICcuL2JvbGQnO1xuaW1wb3J0IHsgY29kZSwgY29kZUJsb2NrIH0gZnJvbSAnLi9jb2RlJztcbmltcG9ydCB7IGl0YWxpYyB9IGZyb20gJy4vaXRhbGljJztcbmltcG9ydCB7IGxpbmsgfSBmcm9tICcuL2xpbmsnO1xuaW1wb3J0IHsgdW5vcmRlcmVkTGlzdENvbW1hbmQsIG9yZGVyZWRMaXN0Q29tbWFuZCwgY2hlY2tlZExpc3RDb21tYW5kIH0gZnJvbSAnLi9saXN0JztcbmltcG9ydCB7IHF1b3RlIH0gZnJvbSAnLi9xdW90ZSc7XG5pbXBvcnQgeyBociB9IGZyb20gJy4vaHInO1xuaW1wb3J0IHsgdGl0bGUgfSBmcm9tICcuL3RpdGxlJztcbmltcG9ydCB7IHRpdGxlMSB9IGZyb20gJy4vdGl0bGUxJztcbmltcG9ydCB7IHRpdGxlMiB9IGZyb20gJy4vdGl0bGUyJztcbmltcG9ydCB7IHRpdGxlMyB9IGZyb20gJy4vdGl0bGUzJztcbmltcG9ydCB7IHRpdGxlNCB9IGZyb20gJy4vdGl0bGU0JztcbmltcG9ydCB7IHRpdGxlNSB9IGZyb20gJy4vdGl0bGU1JztcbmltcG9ydCB7IHRpdGxlNiB9IGZyb20gJy4vdGl0bGU2JztcbmltcG9ydCB7IGNvbW1lbnQgfSBmcm9tICcuL2NvbW1lbnQnO1xuaW1wb3J0IHsgZ3JvdXAgfSBmcm9tICcuL2dyb3VwJztcbmltcG9ydCB7IGRpdmlkZXIgfSBmcm9tICcuL2RpdmlkZXInO1xuaW1wb3J0IHsgY29kZVByZXZpZXcsIGNvZGVFZGl0LCBjb2RlTGl2ZSB9IGZyb20gJy4vcHJldmlldyc7XG5pbXBvcnQgeyBmdWxsc2NyZWVuIH0gZnJvbSAnLi9mdWxsc2NyZWVuJztcbmltcG9ydCB7IGltYWdlIH0gZnJvbSAnLi9pbWFnZSc7XG5pbXBvcnQgeyBzdHJpa2V0aHJvdWdoIH0gZnJvbSAnLi9zdHJpa2VUaHJvdWdoJztcbmltcG9ydCBpbnNlcnRUZXh0IGZyb20gJy4uL3V0aWxzL0luc2VydFRleHRBdFBvc2l0aW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBDb21tYW5kT3JjaGVzdHJhdG9yIHtcbiAgZXhlY3V0ZUNvbW1hbmQoY29tbWFuZDogSUNvbW1hbmQpOiB2b2lkO1xufVxuZXhwb3J0IHR5cGUgSUNvbW1hbmRDaGlsZEhhbmRsZVBhcmFtID0ge1xuICBnZXRTdGF0ZT86IFRleHRBcmVhQ29tbWFuZE9yY2hlc3RyYXRvclsnZ2V0U3RhdGUnXTtcbiAgdGV4dEFwaT86IFRleHRBcGk7XG59O1xuZXhwb3J0IHR5cGUgSUNvbW1hbmRDaGlsZEhhbmRsZSA9IHtcbiAgY2hpbGRyZW4/OiAoaGFuZGxlOiB7IGNsb3NlOiAoKSA9PiB2b2lkOyBleGVjdXRlOiAoKSA9PiB2b2lkIH0gJiBJQ29tbWFuZENoaWxkSGFuZGxlUGFyYW0pID0+IFJlYWN0LlJlYWN0RWxlbWVudDtcbn07XG5leHBvcnQgdHlwZSBJQ29tbWFuZENoaWxkQ29tbWFuZHM8VCA9IHN0cmluZz4gPSB7XG4gIGNoaWxkcmVuPzogQXJyYXk8SUNvbW1hbmQ8VD4+O1xufTtcblxuZXhwb3J0IHR5cGUgSUNvbW1hbmQ8VCA9IHN0cmluZz4gPSB7XG4gIHBhcmVudD86IElDb21tYW5kO1xuICBrZXlDb21tYW5kPzogc3RyaW5nO1xuICBuYW1lPzogc3RyaW5nO1xuICBzaG9ydGN1dHM/OiBzdHJpbmc7XG4gIGdyb3VwTmFtZT86IHN0cmluZztcbiAgaWNvbj86IFJlYWN0LlJlYWN0RWxlbWVudDtcbiAgdmFsdWU/OiBUO1xuICBwb3NpdGlvbj86ICdyaWdodCc7XG4gIGxpUHJvcHM/OiBSZWFjdC5MaUhUTUxBdHRyaWJ1dGVzPEhUTUxMSUVsZW1lbnQ+O1xuICBidXR0b25Qcm9wcz86IFJlYWN0LkJ1dHRvbkhUTUxBdHRyaWJ1dGVzPEhUTUxCdXR0b25FbGVtZW50PiB8IG51bGw7XG4gIGV4ZWN1dGU/OiAoc3RhdGU6IFRleHRTdGF0ZSwgYXBpOiBUZXh0QXBpKSA9PiB2b2lkO1xufSAmIElDb21tYW5kQ2hpbGRDb21tYW5kcyAmXG4gIElDb21tYW5kQ2hpbGRIYW5kbGU7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dFJhbmdlIHtcbiAgc3RhcnQ6IG51bWJlcjtcbiAgZW5kOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dFN0YXRlIHtcbiAgdGV4dDogc3RyaW5nO1xuICBzZWxlY3RlZFRleHQ6IHN0cmluZztcbiAgc2VsZWN0aW9uOiBUZXh0UmFuZ2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dEFwaSB7XG4gIC8qKlxuICAgKiBSZXBsYWNlcyB0aGUgY3VycmVudCBzZWxlY3Rpb24gd2l0aCB0aGUgbmV3IHRleHQuIFRoaXMgd2lsbCBtYWtlIHRoZSBuZXcgc2VsZWN0ZWRUZXh0IHRvIGJlIGVtcHR5LCB0aGVcbiAgICogc2VsZWN0aW9uIHN0YXJ0IGFuZCBzZWxlY3Rpb24gZW5kIHdpbGwgYmUgdGhlIHNhbWUgYW5kIHdpbGwgYm90aCBwb2ludCB0byB0aGUgZW5kXG4gICAqIEBwYXJhbSB0ZXh0IFRleHQgdGhhdCBzaG91bGQgcmVwbGFjZSB0aGUgY3VycmVudCBzZWxlY3Rpb25cbiAgICovXG4gIHJlcGxhY2VTZWxlY3Rpb24odGV4dDogc3RyaW5nKTogVGV4dFN0YXRlO1xuXG4gIC8qKlxuICAgKiBTZWxlY3RzIHRoZSBzcGVjaWZpZWQgdGV4dCByYW5nZVxuICAgKiBAcGFyYW0gc2VsZWN0aW9uXG4gICAqL1xuICBzZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb246IFRleHRSYW5nZSk6IFRleHRTdGF0ZTtcbn1cblxuY29uc3QgZ2V0Q29tbWFuZHM6ICgpID0+IElDb21tYW5kW10gPSAoKSA9PiBbXG4gIGNvbW1lbnQsXG4gIGJvbGQsXG4gIGl0YWxpYyxcbiAgc3RyaWtldGhyb3VnaCxcbiAgaHIsXG4gIHRpdGxlLFxuICBkaXZpZGVyLFxuICBsaW5rLFxuICBxdW90ZSxcbiAgY29kZSxcbiAgY29kZUJsb2NrLFxuICBpbWFnZSxcbiAgZGl2aWRlcixcbiAgdW5vcmRlcmVkTGlzdENvbW1hbmQsXG4gIG9yZGVyZWRMaXN0Q29tbWFuZCxcbiAgY2hlY2tlZExpc3RDb21tYW5kLFxuICBkaXZpZGVyLFxuICBjb2RlRWRpdCxcbiAgY29kZUxpdmUsXG4gIGNvZGVQcmV2aWV3LFxuICBkaXZpZGVyLFxuICBmdWxsc2NyZWVuLFxuXTtcblxuZnVuY3Rpb24gZ2V0U3RhdGVGcm9tVGV4dEFyZWEodGV4dEFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQpOiBUZXh0U3RhdGUge1xuICByZXR1cm4ge1xuICAgIHNlbGVjdGlvbjoge1xuICAgICAgc3RhcnQ6IHRleHRBcmVhLnNlbGVjdGlvblN0YXJ0LFxuICAgICAgZW5kOiB0ZXh0QXJlYS5zZWxlY3Rpb25FbmQsXG4gICAgfSxcbiAgICB0ZXh0OiB0ZXh0QXJlYS52YWx1ZSxcbiAgICBzZWxlY3RlZFRleHQ6IHRleHRBcmVhLnZhbHVlLnNsaWNlKHRleHRBcmVhLnNlbGVjdGlvblN0YXJ0LCB0ZXh0QXJlYS5zZWxlY3Rpb25FbmQpLFxuICB9O1xufVxuXG5jbGFzcyBUZXh0QXJlYVRleHRBcGkgaW1wbGVtZW50cyBUZXh0QXBpIHtcbiAgdGV4dEFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IodGV4dEFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQpIHtcbiAgICB0aGlzLnRleHRBcmVhID0gdGV4dEFyZWE7XG4gIH1cblxuICByZXBsYWNlU2VsZWN0aW9uKHRleHQ6IHN0cmluZyk6IFRleHRTdGF0ZSB7XG4gICAgaW5zZXJ0VGV4dCh0aGlzLnRleHRBcmVhLCB0ZXh0KTtcbiAgICByZXR1cm4gZ2V0U3RhdGVGcm9tVGV4dEFyZWEodGhpcy50ZXh0QXJlYSk7XG4gIH1cblxuICBzZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb246IFRleHRSYW5nZSk6IFRleHRTdGF0ZSB7XG4gICAgdGhpcy50ZXh0QXJlYS5mb2N1cygpO1xuICAgIHRoaXMudGV4dEFyZWEuc2VsZWN0aW9uU3RhcnQgPSBzZWxlY3Rpb24uc3RhcnQ7XG4gICAgdGhpcy50ZXh0QXJlYS5zZWxlY3Rpb25FbmQgPSBzZWxlY3Rpb24uZW5kO1xuICAgIHJldHVybiBnZXRTdGF0ZUZyb21UZXh0QXJlYSh0aGlzLnRleHRBcmVhKTtcbiAgfVxufVxuXG5jbGFzcyBUZXh0QXJlYUNvbW1hbmRPcmNoZXN0cmF0b3IgaW1wbGVtZW50cyBDb21tYW5kT3JjaGVzdHJhdG9yIHtcbiAgdGV4dEFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gIHRleHRBcGk6IFRleHRBcGk7XG5cbiAgY29uc3RydWN0b3IodGV4dEFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQpIHtcbiAgICB0aGlzLnRleHRBcmVhID0gdGV4dEFyZWE7XG4gICAgdGhpcy50ZXh0QXBpID0gbmV3IFRleHRBcmVhVGV4dEFwaSh0ZXh0QXJlYSk7XG4gIH1cblxuICBnZXRTdGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMudGV4dEFyZWEpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gZ2V0U3RhdGVGcm9tVGV4dEFyZWEodGhpcy50ZXh0QXJlYSk7XG4gIH1cblxuICBleGVjdXRlQ29tbWFuZChjb21tYW5kOiBJQ29tbWFuZDxzdHJpbmc+KTogdm9pZCB7XG4gICAgY29tbWFuZC5leGVjdXRlICYmIGNvbW1hbmQuZXhlY3V0ZShnZXRTdGF0ZUZyb21UZXh0QXJlYSh0aGlzLnRleHRBcmVhKSwgdGhpcy50ZXh0QXBpKTtcbiAgfVxufVxuXG5leHBvcnQge1xuICAvLyBUb29sYmFycy5cbiAgdGl0bGUsXG4gIHRpdGxlMSxcbiAgdGl0bGUyLFxuICB0aXRsZTMsXG4gIHRpdGxlNCxcbiAgdGl0bGU1LFxuICB0aXRsZTYsXG4gIGJvbGQsXG4gIGNvZGVCbG9jayxcbiAgaXRhbGljLFxuICBzdHJpa2V0aHJvdWdoLFxuICBocixcbiAgZ3JvdXAsXG4gIGRpdmlkZXIsXG4gIGxpbmssXG4gIHF1b3RlLFxuICBjb2RlLFxuICBpbWFnZSxcbiAgdW5vcmRlcmVkTGlzdENvbW1hbmQsXG4gIG9yZGVyZWRMaXN0Q29tbWFuZCxcbiAgY2hlY2tlZExpc3RDb21tYW5kLFxuICBjb2RlRWRpdCxcbiAgY29kZUxpdmUsXG4gIGNvZGVQcmV2aWV3LFxuICBmdWxsc2NyZWVuLFxuICAvLyBUb29sIG1ldGhvZC5cbiAgZ2V0Q29tbWFuZHMsXG4gIGdldFN0YXRlRnJvbVRleHRBcmVhLFxuICBUZXh0QXJlYUNvbW1hbmRPcmNoZXN0cmF0b3IsXG4gIFRleHRBcmVhVGV4dEFwaSxcbn07XG4iXX0=