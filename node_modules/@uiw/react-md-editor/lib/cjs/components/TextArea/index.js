"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard").default;

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = TextArea;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _react = _interopRequireWildcard(require("react"));

require("prismjs/components/prism-markdown.js");

var _Context = require("../../Context");

var _Markdown = _interopRequireDefault(require("./Markdown"));

var _Textarea = _interopRequireDefault(require("./Textarea"));

function TextArea(props) {
  var _ref = props || {},
      prefixCls = _ref.prefixCls,
      className = _ref.className,
      onScroll = _ref.onScroll,
      otherProps = (0, _objectWithoutProperties2.default)(_ref, ["prefixCls", "className", "onScroll"]);

  var _useContext = (0, _react.useContext)(_Context.EditorContext),
      scrollTop = _useContext.scrollTop,
      dispatch = _useContext.dispatch;

  var warp = /*#__PURE__*/_react.default.createRef();

  (0, _react.useEffect)(function () {
    var state = {};

    if (warp.current) {
      state.textareaWarp = warp.current || undefined;
      warp.current.scrollTop = scrollTop || 0;
    }

    if (dispatch) {
      dispatch((0, _objectSpread2.default)({}, state));
    }
  }, []);
  return (0, _react.useMemo)(function () {
    return /*#__PURE__*/_react.default.createElement("div", {
      ref: warp,
      className: "".concat(prefixCls, "-aree ").concat(className || ''),
      onScroll: onScroll
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "".concat(prefixCls, "-text")
    }, /*#__PURE__*/_react.default.createElement(_Markdown.default, {
      prefixCls: prefixCls
    }), /*#__PURE__*/_react.default.createElement(_Textarea.default, (0, _extends2.default)({
      prefixCls: prefixCls
    }, otherProps))));
  }, []);
}

module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL1RleHRBcmVhL2luZGV4LnRzeCJdLCJuYW1lcyI6WyJUZXh0QXJlYSIsInByb3BzIiwicHJlZml4Q2xzIiwiY2xhc3NOYW1lIiwib25TY3JvbGwiLCJvdGhlclByb3BzIiwiRWRpdG9yQ29udGV4dCIsInNjcm9sbFRvcCIsImRpc3BhdGNoIiwid2FycCIsIlJlYWN0IiwiY3JlYXRlUmVmIiwic3RhdGUiLCJjdXJyZW50IiwidGV4dGFyZWFXYXJwIiwidW5kZWZpbmVkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUdBOztBQUVBOztBQUNBOztBQWNlLFNBQVNBLFFBQVQsQ0FBa0JDLEtBQWxCLEVBQXlDO0FBQUEsYUFDSUEsS0FBSyxJQUFJLEVBRGI7QUFBQSxNQUM5Q0MsU0FEOEMsUUFDOUNBLFNBRDhDO0FBQUEsTUFDbkNDLFNBRG1DLFFBQ25DQSxTQURtQztBQUFBLE1BQ3hCQyxRQUR3QixRQUN4QkEsUUFEd0I7QUFBQSxNQUNYQyxVQURXOztBQUFBLG9CQUV0Qix1QkFBV0Msc0JBQVgsQ0FGc0I7QUFBQSxNQUU5Q0MsU0FGOEMsZUFFOUNBLFNBRjhDO0FBQUEsTUFFbkNDLFFBRm1DLGVBRW5DQSxRQUZtQzs7QUFHdEQsTUFBTUMsSUFBSSxnQkFBR0MsZUFBTUMsU0FBTixFQUFiOztBQUNBLHdCQUFVLFlBQU07QUFDZCxRQUFNQyxLQUFtQixHQUFHLEVBQTVCOztBQUNBLFFBQUlILElBQUksQ0FBQ0ksT0FBVCxFQUFrQjtBQUNoQkQsTUFBQUEsS0FBSyxDQUFDRSxZQUFOLEdBQXFCTCxJQUFJLENBQUNJLE9BQUwsSUFBZ0JFLFNBQXJDO0FBQ0FOLE1BQUFBLElBQUksQ0FBQ0ksT0FBTCxDQUFhTixTQUFiLEdBQXlCQSxTQUFTLElBQUksQ0FBdEM7QUFDRDs7QUFDRCxRQUFJQyxRQUFKLEVBQWM7QUFDWkEsTUFBQUEsUUFBUSxpQ0FBTUksS0FBTixFQUFSO0FBQ0Q7QUFDRixHQVRELEVBU0csRUFUSDtBQVVBLFNBQU8sb0JBQ0w7QUFBQSx3QkFDRTtBQUFLLE1BQUEsR0FBRyxFQUFFSCxJQUFWO0FBQWdCLE1BQUEsU0FBUyxZQUFLUCxTQUFMLG1CQUF1QkMsU0FBUyxJQUFJLEVBQXBDLENBQXpCO0FBQW1FLE1BQUEsUUFBUSxFQUFFQztBQUE3RSxvQkFDRTtBQUFLLE1BQUEsU0FBUyxZQUFLRixTQUFMO0FBQWQsb0JBQ0UsNkJBQUMsaUJBQUQ7QUFBVSxNQUFBLFNBQVMsRUFBRUE7QUFBckIsTUFERixlQUVFLDZCQUFDLGlCQUFEO0FBQVUsTUFBQSxTQUFTLEVBQUVBO0FBQXJCLE9BQW9DRyxVQUFwQyxFQUZGLENBREYsQ0FERjtBQUFBLEdBREssRUFTTCxFQVRLLENBQVA7QUFXRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgJ3ByaXNtanMvY29tcG9uZW50cy9wcmlzbS1tYXJrZG93bi5qcyc7XG5pbXBvcnQgeyBJUHJvcHMgfSBmcm9tICcuLi8uLi91dGlscyc7XG5pbXBvcnQgJy4vaW5kZXgubGVzcyc7XG5pbXBvcnQgeyBFZGl0b3JDb250ZXh0LCBDb250ZXh0U3RvcmUgfSBmcm9tICcuLi8uLi9Db250ZXh0JztcblxuaW1wb3J0IE1hcmtkb3duIGZyb20gJy4vTWFya2Rvd24nO1xuaW1wb3J0IFRleHRhcmVhIGZyb20gJy4vVGV4dGFyZWEnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElUZXh0QXJlYVByb3BzXG4gIGV4dGVuZHMgT21pdDxSZWFjdC5UZXh0YXJlYUhUTUxBdHRyaWJ1dGVzPEhUTUxUZXh0QXJlYUVsZW1lbnQ+LCAndmFsdWUnIHwgJ29uQ2hhbmdlJyB8ICdvblNjcm9sbCc+LFxuICAgIElQcm9wcyB7XG4gIG9uU2Nyb2xsPzogKGU6IFJlYWN0LlVJRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB2b2lkO1xuICB2YWx1ZT86IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgVGV4dEFyZWFSZWYgPSB7XG4gIHRleHQ/OiBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICB3YXJwPzogSFRNTERpdkVsZW1lbnQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBUZXh0QXJlYShwcm9wczogSVRleHRBcmVhUHJvcHMpIHtcbiAgY29uc3QgeyBwcmVmaXhDbHMsIGNsYXNzTmFtZSwgb25TY3JvbGwsIC4uLm90aGVyUHJvcHMgfSA9IHByb3BzIHx8IHt9O1xuICBjb25zdCB7IHNjcm9sbFRvcCwgZGlzcGF0Y2ggfSA9IHVzZUNvbnRleHQoRWRpdG9yQ29udGV4dCk7XG4gIGNvbnN0IHdhcnAgPSBSZWFjdC5jcmVhdGVSZWY8SFRNTERpdkVsZW1lbnQ+KCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgc3RhdGU6IENvbnRleHRTdG9yZSA9IHt9O1xuICAgIGlmICh3YXJwLmN1cnJlbnQpIHtcbiAgICAgIHN0YXRlLnRleHRhcmVhV2FycCA9IHdhcnAuY3VycmVudCB8fCB1bmRlZmluZWQ7XG4gICAgICB3YXJwLmN1cnJlbnQuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wIHx8IDA7XG4gICAgfVxuICAgIGlmIChkaXNwYXRjaCkge1xuICAgICAgZGlzcGF0Y2goeyAuLi5zdGF0ZSB9KTtcbiAgICB9XG4gIH0sIFtdKTtcbiAgcmV0dXJuIHVzZU1lbW8oXG4gICAgKCkgPT4gKFxuICAgICAgPGRpdiByZWY9e3dhcnB9IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1hcmVlICR7Y2xhc3NOYW1lIHx8ICcnfWB9IG9uU2Nyb2xsPXtvblNjcm9sbH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXRleHRgfT5cbiAgICAgICAgICA8TWFya2Rvd24gcHJlZml4Q2xzPXtwcmVmaXhDbHN9IC8+XG4gICAgICAgICAgPFRleHRhcmVhIHByZWZpeENscz17cHJlZml4Q2xzfSB7Li4ub3RoZXJQcm9wc30gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApLFxuICAgIFtdLFxuICApO1xufVxuIl19